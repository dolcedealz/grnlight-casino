<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#121212">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Greenlight Casino</title>
    
    <!-- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π CSS –∏–Ω–ª–∞–π–Ω –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ -->
    <style>
        :root {
            --primary-green: #00A86B;
            --gold: #FFD700;
            --dark-gray: #121212;
            --black: #000000;
            --white: #FFFFFF;
        }
        
        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            background-color: var(--dark-gray);
            color: var(--white);
            overflow-x: hidden;
            min-height: 100vh;
            -webkit-tap-highlight-color: transparent;
        }
        
        .app-container {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            background: var(--dark-gray);
        }
        
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--dark-gray);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.3s ease;
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top-color: var(--primary-green);
            animation: spin 1s linear infinite;
        }
        
        .loading-text {
            color: var(--white);
            font-size: 1.2rem;
            margin-top: 1.5rem;
            text-align: center;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* –°–∫—Ä—ã—Ç–∏–µ –≤—Å–µ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ */
        .app-content {
            display: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .app-content.loaded {
            display: block;
            opacity: 1;
        }
    </style>
    
    <!-- –ó–∞–≥—Ä—É–∂–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π CSS –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ -->
    <link rel="preload" href="css/style.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="css/style.css"></noscript>
</head>
<body>
    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ -->
    <div id="error-container" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.9); color: white; z-index: 10000; padding: 2rem; text-align: center; justify-content: center; align-items: center; flex-direction: column;">
        <h2>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h2>
        <p id="error-message">–ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞.</p>
        <button onclick="location.reload()" style="background: #00A86B; border: none; color: white; padding: 10px 20px; margin-top: 20px; cursor: pointer; border-radius: 5px;">–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å</button>
    </div>

    <!-- –ó–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —ç–∫—Ä–∞–Ω -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">–ó–∞–≥—Ä—É–∑–∫–∞ Greenlight Casino...</div>
        <div id="loading-progress" style="width: 80%; height: 4px; background: rgba(255,255,255,0.1); margin-top: 20px; border-radius: 2px;">
            <div id="progress-bar" style="width: 0%; height: 100%; background: #00A86B; border-radius: 2px; transition: width 0.3s;"></div>
        </div>
        <div id="loading-debug" style="margin-top: 10px; font-size: 12px; color: #888; max-width: 80%; text-align: center;"></div>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç) -->
    <div class="app-content" id="app-content">
        <div class="app-container">
            <!-- Header -->
            <header class="header">
                <div class="logo">
                    <div class="green-light"></div>
                    <h1>Greenlight</h1>
                </div>
                <div class="balance">
                    <span id="balance-amount">0</span>
                    <span class="star">‚≠ê</span>
                </div>
            </header>

            <!-- Main Content -->
            <main class="main-content">
                <!-- Welcome Screen -->
                <div id="welcome-screen" class="screen active">
                    <div class="game-selection">
                        <!-- –£–±–∏—Ä–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è –±–æ–ª–µ–µ –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–æ–≥–æ –¥–∏–∑–∞–π–Ω–∞ -->
                        <div class="game-layout">
                            <!-- –í–µ—Ä—Ö–Ω–µ–µ —Å–æ–±—ã—Ç–∏–µ —Ç–∏–ø–∞ Polymarket -->
                            <div class="event-card" data-game="events">
                                <div class="event-icon">üèÜ</div>
                                <div class="event-details">
                                    <div class="event-name">–°–æ–±—ã—Ç–∏—è</div>
                                    <div class="event-description">–°—Ç–∞–≤–∫–∏ –Ω–∞ —Å–æ–±—ã—Ç–∏—è</div>
                                </div>
                            </div>
                            
                            <!-- –°–ª–æ—Ç—ã –∏ –ú–∞–π–Ω–µ—Ä (–≤–µ—Ä—Ö–Ω–∏–π —Ä—è–¥) -->
                            <div class="game-row">
                                <div class="game-card" data-game="slots">
                                    <div class="game-icon">üé∞</div>
                                    <div class="game-name">–°–ª–æ—Ç—ã</div>
                                </div>
                                <div class="game-card" data-game="miner">
                                    <div class="game-icon">üí£</div>
                                    <div class="game-name">–ú–∞–π–Ω–µ—Ä</div>
                                </div>
                            </div>
                            
                            <!-- Coin Flip –∏ –ö—Ä–∞—à (–Ω–∏–∂–Ω–∏–π —Ä—è–¥) -->
                            <div class="game-row">
                                <div class="game-card" data-game="dispute">
                                    <div class="game-icon">ü™ô</div>
                                    <div class="game-name">–ú–æ–Ω–µ—Ç–∞</div>
                                </div>
                                <div class="game-card" data-game="crush">
                                    <div class="game-icon">üìà</div>
                                    <div class="game-name">–ö—Ä–∞—à</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Slots Game Screen -->
                <div id="slots-screen" class="screen">
                    <div class="game-header">
                        <button class="back-btn">‚Üê –ù–∞–∑–∞–¥</button>
                        <h2>–°–ª–æ—Ç—ã</h2>
                    </div>
                    <div class="slots-container">
                        <div class="slot-reels">
                            <!-- –°–ª–æ—Ç—ã –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ JavaScript -->
                        </div>
                        <div id="slots-result" class="result"></div>
                        <div class="bet-controls">
                            <div class="bet-amount">
                                <label for="slots-bet">–°—Ç–∞–≤–∫–∞:</label>
                                <input type="number" id="slots-bet" min="1" value="10">
                            </div>
                            <button id="spin-btn" class="action-btn">–ö–†–£–¢–ò–¢–¨</button>
                        </div>
                    </div>
                </div>
                
                <!-- Miner Game Screen -->
                <div id="miner-screen" class="screen">
                    <div class="game-header">
                        <button class="back-btn">‚Üê –ù–∞–∑–∞–¥</button>
                        <h2>–ú–∞–π–Ω–µ—Ä</h2>
                    </div>
                    <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏–≥—Ä—ã Miner -->
                </div>
                
                <!-- Crush Game Screen -->
                <div id="crush-screen" class="screen">
                    <div class="game-header">
                        <button class="back-btn">‚Üê –ù–∞–∑–∞–¥</button>
                        <h2>–ö—Ä–∞—à</h2>
                    </div>
                    <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏–≥—Ä—ã Crush -->
                </div>

                <!-- Dispute/Coin Flip Game Screen -->
                <div id="dispute-screen" class="screen">
                    <div class="game-header">
                        <button class="back-btn">‚Üê –ù–∞–∑–∞–¥</button>
                        <h2>–ú–æ–Ω–µ—Ç–∞</h2>
                    </div>
                    <div class="dispute-container" id="dispute-container">
                        <div id="dispute-info" class="dispute-info">
                            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–ø–æ—Ä–µ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </div>
                        
                        <div class="coin-selection">
                            <h3>–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–æ—Ä–æ–Ω—É</h3>
                            <div class="coin-buttons">
                                <button id="heads-btn" class="coin-btn">
                                    <div class="coin-icon">ü¶Ö</div>
                                    <div class="coin-text">–û–†–Å–õ</div>
                                </button>
                                <button id="tails-btn" class="coin-btn">
                                    <div class="coin-icon">üî±</div>
                                    <div class="coin-text">–†–ï–®–ö–ê</div>
                                </button>
                            </div>
                        </div>
                        
                        <div class="coin-status">
                            <div id="my-choice" class="player-choice"></div>
                            <div id="opponent-choice" class="player-choice"></div>
                        </div>
                        
                        <div class="coin-animation-container">
                            <div id="coin-animation" class="coin">
                                <div class="coin-heads">–û–†–Å–õ</div>
                                <div class="coin-tails">–†–ï–®–ö–ê</div>
                            </div>
                        </div>
                        
                        <button id="flip-btn" class="action-btn" disabled>–ü–û–î–ë–†–û–°–ò–¢–¨</button>
                        
                        <div id="dispute-result" class="result"></div>
                    </div>
                </div>
                
                <!-- Events Screen -->
                <div id="events-screen" class="screen">
                    <div class="game-header">
                        <button class="back-btn">‚Üê –ù–∞–∑–∞–¥</button>
                        <h2>–°–æ–±—ã—Ç–∏—è</h2>
                    </div>
                    <div class="events-container">
                        <div class="events-description">
                            <p>–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫–∏ –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è.</p>
                        </div>
                        
                        <div class="events-list">
                            <div class="event-item">
                                <div class="event-title">–ß–µ–º–ø–∏–æ–Ω–∞—Ç –º–∏—Ä–∞ –ø–æ —Ñ—É—Ç–±–æ–ª—É 2026</div>
                                <div class="event-options">
                                    <div class="event-option">
                                        <span>–ê—Ä–≥–µ–Ω—Ç–∏–Ω–∞</span>
                                        <span>3.5</span>
                                    </div>
                                    <div class="event-option">
                                        <span>–ë—Ä–∞–∑–∏–ª–∏—è</span>
                                        <span>2.8</span>
                                    </div>
                                    <div class="event-option">
                                        <span>–§—Ä–∞–Ω—Ü–∏—è</span>
                                        <span>4.2</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="event-item">
                                <div class="event-title">–í—ã–±–æ—Ä—ã 2026 –≥–æ–¥–∞</div>
                                <div class="event-options">
                                    <div class="event-option">
                                        <span>–ö–∞–Ω–¥–∏–¥–∞—Ç –ê</span>
                                        <span>1.9</span>
                                    </div>
                                    <div class="event-option">
                                        <span>–ö–∞–Ω–¥–∏–¥–∞—Ç –ë</span>
                                        <span>2.1</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="event-item">
                                <div class="event-title">–ö—É—Ä—Å BTC –∫ –∫–æ–Ω—Ü—É –≥–æ–¥–∞</div>
                                <div class="event-options">
                                    <div class="event-option">
                                        <span>–í—ã—à–µ $100K</span>
                                        <span>3.2</span>
                                    </div>
                                    <div class="event-option">
                                        <span>–ù–∏–∂–µ $100K</span>
                                        <span>1.4</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>

            <!-- Modals -->
            <div id="history-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>–ò—Å—Ç–æ—Ä–∏—è</h2>
                        <span class="close-modal">&times;</span>
                    </div>
                    <div class="modal-body">
                        <div id="history-list" class="history-list">
                            <!-- –ò—Å—Ç–æ—Ä–∏—è –∏–≥—Ä –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="profile-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>–ü—Ä–æ—Ñ–∏–ª—å</h2>
                        <span class="close-modal">&times;</span>
                    </div>
                    <div class="modal-body">
                        <div class="user-info">
                            <h3>–ü—Ä–∏–≤–µ—Ç, <span id="user-name">–ò–≥—Ä–æ–∫</span>!</h3>
                            <p>–ë–∞–ª–∞–Ω—Å: <span id="profile-balance">0</span> ‚≠ê</p>
                        </div>
                        <h3>–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</h3>
                        <div id="transaction-list" class="transaction-list">
                            <!-- –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bottom Navigation -->
            <nav class="bottom-nav">
                <button id="history-btn" class="nav-btn">
                    <span class="nav-icon">üìú</span>
                    <span class="nav-label">–ò—Å—Ç–æ—Ä–∏—è</span>
                </button>
                <button id="home-btn" class="nav-btn active">
                    <span class="nav-icon">üè†</span>
                    <span class="nav-label">–ì–ª–∞–≤–Ω–∞—è</span>
                </button>
                <button id="profile-btn" class="nav-btn">
                    <span class="nav-icon">üë§</span>
                    <span class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</span>
                </button>
            </nav>
        </div>
    </div>

    <!-- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–∞–Ω–Ω—ã—Ö -->
    <script>
        // –°–æ–∑–¥–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º–µ–Ω –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        window.GreenLightApp = {
            // –í–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
            version: '1.1.0',
            
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
            loading: {
                started: Date.now(),
                scriptsLoaded: false,
                mainInitialized: false,
                telegramInitialized: false,
                gamesInitialized: false,
                uiReady: false,
                errors: []
            },
            
            // –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è –∏–≥—Ä - —É–±–∏—Ä–∞–µ–º roulette –∏ guessnumber, –¥–æ–±–∞–≤–ª—è–µ–º events
            games: {
                slots: { loaded: false, instance: null },
                miner: { loaded: false, instance: null },
                crush: { loaded: false, instance: null },
                dispute: { loaded: false, instance: null },
                events: { loaded: false, instance: null }
            },
            
            // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
            user: {
                telegramId: null,
                firstName: '–ò–≥—Ä–æ–∫',
                lastName: '',
                username: '',
                balance: 1000
            },
            
            // –ñ—É—Ä–Ω–∞–ª –¥–µ–π—Å—Ç–≤–∏–π (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
            log: function(source, message, isError = false) {
                const timestamp = new Date().toISOString().substr(11, 8);
                const logMessage = `[${timestamp}][${source}] ${message}`;
                
                if (isError) {
                    console.error(logMessage);
                    this.loading.errors.push(logMessage);
                } else {
                    console.log(logMessage);
                }
                
                // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –ª–æ–≥ –≤ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ
                const debugElement = document.getElementById('loading-debug');
                if (debugElement && isError) {
                    debugElement.textContent = message;
                }
                
                return logMessage;
            }
        };
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏–≥—Ä—ã
        window.registerGame = function(name, instance) {
            if (!window.GreenLightApp) return;
            
            // –ö–æ—Ä–æ—Ç–∫–æ–µ –∏–º—è –∏–≥—Ä—ã (–±–µ–∑ "Game" –≤ –∫–æ–Ω—Ü–µ)
            const shortName = name.replace('Game', '').toLowerCase();
            
            if (window.GreenLightApp.games[shortName]) {
                window.GreenLightApp.games[shortName].loaded = true;
                window.GreenLightApp.games[shortName].instance = instance;
                window.GreenLightApp.log('GameRegistry', `–ò–≥—Ä–∞ ${name} –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞`);
            } else {
                window.GreenLightApp.log('GameRegistry', `–û—à–∏–±–∫–∞: –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∏–≥—Ä–∞ ${name}`, true);
            }
        };
    </script>

    <!-- –£–ª—É—á—à–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤ -->
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –∑–∞–≥—Ä—É–∑–∫–∏
        document.addEventListener('DOMContentLoaded', function() {
            try {
                window.GreenLightApp.log('Loader', 'DOM –∑–∞–≥—Ä—É–∂–µ–Ω, –Ω–∞—á–∏–Ω–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É');
                
                // –°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∂–∞–µ–º –±–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
                loadTelegramApi()
                    .then(() => {
                        return Promise.all([
                            loadBootstrapScripts(),
                            loadMainApp()
                        ]);
                    })
                    .then(() => {
                        window.GreenLightApp.loading.scriptsLoaded = true;
                        window.GreenLightApp.log('Loader', '–û—Å–Ω–æ–≤–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã');
                        
                        // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
                        if (window.casinoApp && typeof window.casinoApp.init === 'function') {
                            window.casinoApp.init().catch(error => {
                                window.GreenLightApp.log('Loader', `–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: ${error.message}`, true);
                            });
                        } else {
                            window.GreenLightApp.log('Loader', '–û—à–∏–±–∫–∞: casinoApp –Ω–µ –Ω–∞–π–¥–µ–Ω', true);
                        }
                    })
                    .catch(error => {
                        window.GreenLightApp.log('Loader', `–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: ${error.message}`, true);
                        showErrorScreen(error.message);
                    });
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–≤–∞—Ä–∏–π–Ω—ã–π —Ç–∞–π–º–µ—Ä –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —ç–∫—Ä–∞–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∏
                setupEmergencyLoader();
                
            } catch (error) {
                window.GreenLightApp.log('Loader', `–ù–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: ${error.message}`, true);
                showErrorScreen(error.message);
            }
        });
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ Telegram API
        function loadTelegramApi() {
            return new Promise((resolve, reject) => {
                window.GreenLightApp.log('Loader', '–ó–∞–≥—Ä—É–∑–∫–∞ Telegram WebApp API');
                
                const script = document.createElement('script');
                script.src = 'https://telegram.org/js/telegram-web-app.js';
                script.async = true;
                
                script.onload = function() {
                    window.GreenLightApp.log('Loader', 'Telegram WebApp API –∑–∞–≥—Ä—É–∂–µ–Ω');
                    resolve();
                };
                
                script.onerror = function() {
                    const errorMsg = '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ Telegram WebApp API';
                    window.GreenLightApp.log('Loader', errorMsg, true);
                    // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ Telegram API
                    resolve();
                };
                
                document.body.appendChild(script);
            });
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
        function loadBootstrapScripts() {
            return new Promise((resolve, reject) => {
                window.GreenLightApp.log('Loader', '–ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤');
                
                const loaderScript = document.createElement('script');
                loaderScript.src = 'js/loader.js';
                
                loaderScript.onload = function() {
                    window.GreenLightApp.log('Loader', '–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã');
                    resolve();
                };
                
                loaderScript.onerror = function() {
                    const errorMsg = '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤';
                    window.GreenLightApp.log('Loader', errorMsg, true);
                    reject(new Error(errorMsg));
                };
                
                document.body.appendChild(loaderScript);
            });
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        function loadMainApp() {
            return new Promise((resolve, reject) => {
                window.GreenLightApp.log('Loader', '–ó–∞–≥—Ä—É–∑–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è');
                
                const mainScript = document.createElement('script');
                mainScript.src = 'js/main.js';
                
                mainScript.onload = function() {
                    window.GreenLightApp.log('Loader', '–û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ');
                    
                    // –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ main.js –Ω–∞—á–∏–Ω–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –∏–≥—Ä –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
                    loadGameScriptsAsync();
                    
                    resolve();
                };
                
                mainScript.onerror = function() {
                    const errorMsg = '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è';
                    window.GreenLightApp.log('Loader', errorMsg, true);
                    reject(new Error(errorMsg));
                };
                
                document.body.appendChild(mainScript);
            });
        }
        
        // –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä–æ–≤—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫)
        function loadGameScriptsAsync() {
            window.GreenLightApp.log('Loader', '–ù–∞—á–∞–ª–æ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–≥—Ä–æ–≤—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ (—Ñ–æ–Ω–æ–≤—ã–π —Ä–µ–∂–∏–º)');
            
            const gameScripts = [
                { name: 'slots', path: 'js/games/slots.js' },
                { name: 'miner', path: 'js/games/miner.js' },
                { name: 'crush', path: 'js/games/crush.js' },
                { name: 'dispute', path: 'js/games/dispute.js' },
                { name: 'events', path: 'js/games/events.js' }
            ];
            
            gameScripts.forEach(gameInfo => {
                const script = document.createElement('script');
                script.src = gameInfo.path;
                script.async = true;
                
                script.onload = function() {
                    window.GreenLightApp.log('Loader', `–ò–≥—Ä–∞ ${gameInfo.name} –∑–∞–≥—Ä—É–∂–µ–Ω–∞`);
                };
                
                script.onerror = function() {
                    window.GreenLightApp.log('Loader', `–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–≥—Ä—ã ${gameInfo.name}`, true);
                };
                
                document.body.appendChild(script);
            });
        }
        
        // –ê–≤–∞—Ä–∏–π–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–¥–∞–ª–µ–Ω–∏—è —ç–∫—Ä–∞–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∏
        function setupEmergencyLoader() {
            // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥
            setTimeout(function() {
                const loadingOverlay = document.getElementById('loadingOverlay');
                const appContent = document.getElementById('app-content');
                
                if (loadingOverlay && loadingOverlay.style.display !== 'none') {
                    window.GreenLightApp.log('EmergencyLoader', '–ê–≤–∞—Ä–∏–π–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∏', true);
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫
                    if (window.GreenLightApp.loading.errors.length > 0) {
                        showErrorScreen('–ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏');
                        return;
                    }
                    
                    // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç
                    if (loadingOverlay) {
                        loadingOverlay.style.display = 'none';
                    }
                    
                    if (appContent) {
                        appContent.classList.add('loaded');
                    }
                    
                    // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º welcome-screen
                    const welcomeScreen = document.getElementById('welcome-screen');
                    if (welcomeScreen) {
                        document.querySelectorAll('.screen').forEach(screen => {
                            screen.classList.remove('active');
                        });
                        welcomeScreen.classList.add('active');
                    }
                }
            }, 10000); // 10 —Å–µ–∫—É–Ω–¥ –º–∞–∫—Å–∏–º—É–º
            
            // –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(function() {
                const loadingStatus = {
                    scriptsLoaded: window.GreenLightApp.loading.scriptsLoaded,
                    mainInitialized: window.GreenLightApp.loading.mainInitialized,
                    errors: window.GreenLightApp.loading.errors.length
                };
                
                window.GreenLightApp.log('EmergencyLoader', `–°—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∑–∫–∏ —á–µ—Ä–µ–∑ 5 —Å–µ–∫: ${JSON.stringify(loadingStatus)}`);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
                const progressBar = document.getElementById('progress-bar');
                if (progressBar) {
                    progressBar.style.width = '70%';
                }
                
            }, 5000);
        }
        
        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ –æ—à–∏–±–∫–∏
        function showErrorScreen(errorMessage) {
            const errorContainer = document.getElementById('error-container');
            const errorMessageElement = document.getElementById('error-message');
            const loadingOverlay = document.getElementById('loadingOverlay');
            
            if (errorContainer && errorMessageElement) {
                errorMessageElement.textContent = errorMessage || '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è';
                errorContainer.style.display = 'flex';
                
                if (loadingOverlay) {
                    loadingOverlay.style.display = 'none';
                }
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∑–∞–≥—Ä—É–∑–∫–∏
        function updateLoadingProgress(percent) {
            const progressBar = document.getElementById('progress-bar');
            if (progressBar) {
                progressBar.style.width = percent + '%';
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        updateLoadingProgress(10);
    </script>
</body>
</html>